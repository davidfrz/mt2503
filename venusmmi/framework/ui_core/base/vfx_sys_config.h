/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 *  vfx_sys_config.h
 *
 * Project:
 * --------
 *  Venus MMI
 *
 * Description:
 * ------------
 *  VFX system config header file
 *
 * Author:
 * -------
 * -------
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

#ifndef __VFX_SYS_CONFIG_H__
#define __VFX_SYS_CONFIG_H__

/***************************************************************************** 
 * Include
 *****************************************************************************/
#ifdef  __cplusplus
extern "C"
{
#endif
#include "MMI_features.h"
#include "lcd_sw_inc.h"
#ifdef  __cplusplus
}
#endif


/***************************************************************************** 
 * Define
 *****************************************************************************/

/*
 * Defines size of VRT system memory
 * NOTES: 
 *  Do not modify the value.
 *  This the minimun size to create memory context for Venus APP.
 */
#define VFX_SYS_MEM_VRT_BUF_SIZE        (55 * 1024)

/*
 * Defines size of venus global memory
 */
#if defined(__MMI_VFX_SYS_GLOBAL_MEM_SIZE__)
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    __MMI_VFX_SYS_GLOBAL_MEM_SIZE__
#elif defined(__VENUS_3D_UI_ENGINE__)
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    (250 * 1024)
#elif defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI_PACKAGE__)
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    (80 * 1024) 
#elif defined(__COSMOS_MMI__)
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    (150 * 1024)
#elif defined(__MMI_VUI_SHELL_MULTI_PAGE__)
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    (100 * 1024)
#else
#define VFX_SYS_MEM_GLOBAL_POOL_SIZE    (50 * 1024)
#endif

/*
 * Defines a default memory size for all VfxAppCatScr from Screen ASM
 * (without minimun size)
 */
#define VFX_SYS_MEM_SCREEN_POOL_SIZE    (145 * 1024)

/*
 * The value to register on Screen ASM.
 */
#define VFX_SYS_MEM_DEFAULT_SCR_ASM_SIZE (VFX_SYS_MEM_SCREEN_POOL_SIZE + VFX_SYS_MEM_VRT_BUF_SIZE)


/*
 * VRT memory config
 */
#define VFX_SYS_RENDER_MEMORY_CONFIG_NUM 8

#define VRT_RENDER_DCACHED_LAYER (defined(__MTK_TARGET__) && defined(__DYNAMIC_SWITCH_CACHEABILITY__))

#define VRT_MEM_UNIT_SIZE (LCD_WIDTH * LCD_HEIGHT * MMI_MAIN_BASE_LAYER_BITS_PER_PIXEL / 8)

#define VFX_SYS_APP_DEFAULT_VRT_CACHE_FACTOR (0)

/* 
 * NOTICE!!! 
 */
/* code gen parser does not support constant type casting. Must ignore code gen. */
#ifdef GEN_FOR_PC
    #define VRT_MEM_UNIT(v) (1)
#else
    #define VRT_MEM_UNIT(v) ((unsigned int)((float)v * VRT_MEM_UNIT_SIZE))
#endif

typedef unsigned char VFX_SYS_MEM_U8;

/* MED memory safe margin for MED temp */
#if defined(__MMI_FTE_SUPPORT_SLIM__) || defined(__MMI_VUI_HOMESCREEN_VIDEO_WALLPAPER__)

    #if defined(__MMI_SCREEN_SWITCH_EFFECT__) && !defined(__MMI_SCREEN_SWITCH_EFFECT_VENUS__) && defined(__MED_IN_ASM__)
	
        #define  VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (20 * 1024)
		
	#elif (defined(__MMI_SCREEN_SWITCH_EFFECT__) && !defined(__MMI_SCREEN_SWITCH_EFFECT_VENUS__)) || defined(__MED_IN_ASM__)
	
	    #if defined(__MMI_VUI_3D_MAINMENU__)
	        #define VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (VRT_MEM_UNIT(1.0f) + 20 * 1024)
	    #else
	        #define VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (20 * 1024)
	    #endif
		
    #else
	
	    #if defined(__MMI_VUI_3D_MAINMENU__)
	        #define VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (VRT_MEM_UNIT(3.0f) + 20 * 1024)
	    #else
	        #define VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (VRT_MEM_UNIT(2.0f) + 20 * 1024)
	    #endif
		
    #endif
    
#else 

#define VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN   (20 * 1024)

#endif



typedef union
{

#if defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI__)
/* COSMOS SLIM */
    VFX_SYS_MEM_U8 CACHE_COSMOS_SLIM_MMI[VRT_MEM_UNIT(1.01f)];
    
#else /* defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI__) */

/* Default */
    VFX_SYS_MEM_U8 CACHE_DEFAULT[VRT_MEM_UNIT(1.5f)];

/* COSMOS default */
#if defined(__COSMOS_MMI__)
    VFX_SYS_MEM_U8 CACHE_COSMOS_MMI[VRT_MEM_UNIT(4.8f)];
#else

/* 3D Cube App */
#if defined(__MMI_MAINLCD_320X480__) && defined(__MMI_VUI_3D_CUBE_APP__)    
    VFX_SYS_MEM_U8 CACHE_3D_CUBE_APP[VRT_MEM_UNIT(5.36f)];      /* HVGA cube (16-bit) needs 1600 KB. */
#endif

/* Home Screen */
#if defined(__MMI_MAINLCD_320X480__) && defined(__MMI_VUI_SHELL_APP__)
    VFX_SYS_MEM_U8 CACHE_HOMESCREEN[VRT_MEM_UNIT(5.0f)];
#elif defined(__MMI_MAINLCD_240X400__) && defined(__MMI_VUI_SHELL_APP__)
    VFX_SYS_MEM_U8 CACHE_HOMESCREEN[VRT_MEM_UNIT(5.0f)];
#endif

/* Shell App */
#if defined(__MMI_MAINLCD_320X480__) && defined(__MMI_VUI_SHELL_MULTI_PAGE__)
    VFX_SYS_MEM_U8 CACHE_VAPP_SHELL[VRT_MEM_UNIT(6.86f)];       /* 2048 KB for 16-bit */
#elif defined(__MMI_MAINLCD_240X400__) && defined(__MMI_VUI_SHELL_MULTI_PAGE__)
    VFX_SYS_MEM_U8 CACHE_VAPP_SHELL[VRT_MEM_UNIT(7.0f)];        /* 1311 KB for 16-bit */
#endif

/* Live Wallpaper */
#if defined(__MMI_VUI_HOMESCREEN_LIVE_WALLPAPER__)
    VFX_SYS_MEM_U8 CACHE_LIVE_WALLPAPER[VRT_MEM_UNIT(4.86f)];	/* align Shell App configuration */
#endif

/* 3D Mainmenu */
#if defined(__MMI_VUI_3D_MAINMENU__)
    VFX_SYS_MEM_U8 CACHE_3D_MAINMENU[VRT_MEM_UNIT(4.0f)];
#endif

#endif /*#if defined(__COSMOS_MMI__)*/

/* 3D COSMOS */
#if defined(__VENUS_3D_UI_ENGINE__)

#if defined(__MMI_MAINLCD_480X800__)
    /* WVGA 12.5 MB */
    VFX_SYS_MEM_U8 CACHE_3D_COSMOS_MMI[12 * 1024 * 1024 + 512 * 1024];
#else /* defined(__MMI_MAINLCD_480X800__) */
    #if defined(__COSMOS_MMI__)
        /* COSMOS HVGA and lower 11 MB */
        VFX_SYS_MEM_U8 CACHE_3D_COSMOS_MMI[11 * 1024 * 1024];
    #else
        /* FTE 9MB */
        VFX_SYS_MEM_U8 CACHE_3D_COSMOS_MMI[9 * 1024 * 1024];
    #endif
#endif /* defined(__MMI_MAINLCD_480X800__) */

#endif /* defined(__VENUS_3D_UI_ENGINE__) */

#endif /* defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI__) */

} vfx_sys_mem_vrt_cache_size_union;


#define VFX_SYS_MEM_VRT_CACHE_ALIGN_4_BYTE(x) (((x) + 3) >> 2 << 2)
#ifndef __MMI_REDUCED_UI_BUFFER__
#define VFX_SYS_MEM_VRT_CACHE_MAX_SIZE VFX_SYS_MEM_VRT_CACHE_ALIGN_4_BYTE(sizeof(vfx_sys_mem_vrt_cache_size_union))
#else
#define VFX_SYS_MEM_VRT_CACHE_MAX_SIZE 0
#endif /* __MMI_REDUCED_UI_BUFFER__ */



/* consider mmi feature config cache factor size */
#if defined(__MMI_VRT_CACHE_SIZE_FACTOR__)
	#undef VFX_SYS_MEM_VRT_CACHE_MAX_SIZE
	#define VFX_SYS_MEM_VRT_CACHE_MAX_SIZE VFX_SYS_MEM_VRT_CACHE_ALIGN_4_BYTE(VRT_MEM_UNIT(((float)(__MMI_VRT_CACHE_SIZE_FACTOR__) / 100.0f)))	
#endif


#define VFX_SYS_MEM_VRT_CACHE_MEM_MAX_RATIO (1.0f)

#if defined(__MED_IN_ASM__) && defined(__COSMOS_MMI__)
    //#define VRT_MEM_DEFAULT_CACHE_FACTOR    ((float)(VFX_SYS_MEM_VRT_CACHE_MAX_SIZE + VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN) / VRT_MEM_UNIT_SIZE)
    #define VRT_MEM_DEFAULT_CACHE_FACTOR    (0)
    #define VFX_SYS_MEM_VRT_SIZE            (0)
#else

#ifdef __VENUS_UI_ENGINE__
    #define VRT_MEM_DEFAULT_CACHE_FACTOR    (0)
    #define VFX_SYS_MEM_VRT_SIZE            (VFX_SYS_MEM_VRT_CACHE_MAX_SIZE + VFX_SYS_MEM_VRT_MED_MEMORY_SAFE_MARGIN) 
#else
    #define VRT_MEM_DEFAULT_CACHE_FACTOR    (0)
    #define VFX_SYS_MEM_VRT_SIZE            (0)
#endif

#endif    

#if defined(__VENUS_3D_UI_ENGINE__)
    // TODO: FIX ME FOR THE FINAL VALUE
    #define VFX_SYS_MEM_VRT_CACHE_LIMIT_SIZE VRT_MEM_UNIT(5.0f)
#else
    #define VFX_SYS_MEM_VRT_CACHE_LIMIT_SIZE VFX_SYS_MEM_VRT_CACHE_MAX_SIZE
#endif

/* The memory for VRT context heap memory size */
#if defined(__VENUS_3D_UI_ENGINE__)
#define VFX_SYS_VRT_CONTEXT_HEAP_SIZE   (1024 * 1024)
#elif defined(__COSMOS_SLIM_ASM3X_PROFILE__)
#define VFX_SYS_VRT_CONTEXT_HEAP_SIZE   (150 * 1024)
#elif defined(__LOW_COST_SUPPORT_COMMON__) && defined(__COSMOS_MMI_PACKAGE__)
#define VFX_SYS_VRT_CONTEXT_HEAP_SIZE   (280 * 1024)
#else
#define VFX_SYS_VRT_CONTEXT_HEAP_SIZE   (430 * 1024)
#endif

#endif /* __VFX_SYS_CONFIG_H__ */

